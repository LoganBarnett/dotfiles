#+title:     File Management
#+author:    Logan Barnett
#+email:     logustus@gmail.com
#+date:      <2024-10-05 Sat>
#+language:  en
#+file_tags:
#+tags:


* stitch

#+begin_src emacs-lisp :results none :exports code :tangle yes
(defun config/rename-current-buffer-file-vc ()
  (interactive)
  (vc-rename-file
   (buffer-file-name)
   (counsel-find-file (buffer-file-name) default-directory)
   )
  )

(defun config/rename-current-buffer-file-no-vc ()
  (interactive)
  (rename-file
   (buffer-file-name)
   (counsel-find-file (buffer-file-name) default-directory)
   )
  )

(defun config/current-buffer-file-delete-vc ()
  (interactive)
  (vc-delete-file (buffer-file-name))
  )

(defun config/current-buffer-file-delete-no-vc ()
  (interactive)
  (delete-file (buffer-file-name))
  )

(eval-after-load "evil"
  (progn
    (map!
     :leader
     :prefix ("f" . "files")
     :desc "File rename" "r" #'config/rename-current-buffer-file-vc
     :desc "File rename (no-vc)" "R" #'config/rename-current-buffer-file-no-vc
     :desc "File delete" "d" #'config/current-buffer-file-delete-vc
     :desc "File delete (no VC)" "D" #'config/current-buffer-file-delete-no-vc
     )
    ;; This keeps eval-after-load from calling the last thing evaluated (which
    ;; would be the function passed to `map!').
    nil
    )
  )
#+end_src
